{"version":3,"sources":["webpack:///./src/api/home.js","webpack:///./src/views/category/components/goods-itme.vue?7051","webpack:///./src/views/category/index.vue?b2c9","webpack:///./src/views/category/index.vue","webpack:///./src/views/category/index.vue?05e4","webpack:///./src/views/category/components/goods-itme.vue","webpack:///./src/views/category/components/goods-itme.vue?fd4e"],"names":["findBrand","limit","request","findBanner","findNew","findHot","findGoods","findSpecial","class","_createElementVNode","href","_createElementBlock","_hoisted_1","_hoisted_2","_createVNode","_component_XtxBread","_component_XtxBreadItem","to","_Transition","name","mode","_createBlock","key","$setup","topCategory","id","_component_XtxCarousel","sliders","style","_hoisted_3","_hoisted_4","_Fragment","_renderList","children","item","_hoisted_5","src","picture","_toDisplayString","subList","_hoisted_7","_hoisted_8","desc","_component_XtxMore","_hoisted_9","goods","g","_component_GoodsItem","components","GoodsItem","setup","ref","then","data","value","result","store","useStore","route","useRoute","computed","cate","state","category","list","find","params","getSubList","findTopCategory","watch","newVal","path","immediate","__exports__","render","_component_RouterLink","$props","alt","price","props","type","Object","default"],"mappings":"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","file":"js/chunk-5332cbe5.7f4a6e9e.js","sourcesContent":["import request from '@/utils/request'\r\n\r\n/**\r\n * 获取品牌\r\n * @returns Promise\r\n */\r\nexport const findBrand = (limit) => {\r\n  return request('/home/brand', 'get', { limit })\r\n}\r\n/**\r\n * 获取广告图\r\n * @returns Promise\r\n */\r\nexport const findBanner = () => {\r\n  return request('/home/banner', 'get')\r\n}\r\n/**\r\n * 获取新鲜好物\r\n * @returns Promise\r\n */\r\nexport const findNew = () => {\r\n  return request('home/new', 'get')\r\n}\r\n/**\r\n * 获取人气推荐\r\n * @returns Promise\r\n */\r\nexport const findHot = () => {\r\n  return request('home/hot', 'get')\r\n}\r\n/**\r\n * 获取商品\r\n * @returns Promise\r\n */\r\nexport const findGoods = () => {\r\n  return request('home/goods', 'get')\r\n}\r\n/**\r\n * 获取最新专题\r\n * @returns Promise\r\n */\r\nexport const findSpecial = () => {\r\n  return request('home/special', 'get')\r\n}\r\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./goods-itme.vue?vue&type=style&index=0&id=55571ba8&scoped=true&lang=less\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=89a5253e&lang=less&scoped=true\"","<template>\r\n  <div class=\"top-category\">\r\n    <div class=\"container\">\r\n      <!-- 面包屑 -->\r\n      <XtxBread>\r\n        <XtxBreadItem to=\"/\">首页</XtxBreadItem>\r\n        <transition name=\"fade-right\" mode=\"out-in\">\r\n          <XtxBreadItem :key=\"topCategory.id\">{{topCategory.name}}</XtxBreadItem>\r\n        </transition>\r\n      </XtxBread>\r\n      <!-- 轮播图 -->\r\n      <XtxCarousel :sliders=\"sliders\" style=\"height:500px\" />\r\n      <!-- 全部分类 -->\r\n      <div class=\"sub-list\">\r\n        <h3>全部分类</h3>\r\n        <ul>\r\n          <li v-for=\"item in topCategory.children\" :key=\"item.id\">\r\n            <a href=\"javascript:;\">\r\n              <img :src=\"item.picture\" >\r\n              <p>{{item.name}}</p>\r\n            </a>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <!-- 各个分类下的推荐商品 -->\r\n      <div class=\"ref-goods\" v-for=\"item in subList\" :key=\"item.id\">\r\n        <div class=\"head\">\r\n          <h3>- {{ item.name }} -</h3>\r\n          <p class=\"tag\">{{ item.desc }}</p>\r\n          <XtxMore />\r\n        </div>\r\n        <div class=\"body\">\r\n          <GoodsItem v-for=\"g in item.goods\" :key=\"g.id\" :goods=\"g\"/>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { findBanner } from '@/api/home'\r\nimport { findTopCategory } from '@/api/category'\r\nimport { useStore } from 'vuex'\r\nimport { useRoute } from 'vue-router'\r\nimport { computed, ref, watch } from 'vue'\r\nimport GoodsItem from './components/goods-itme.vue'\r\nexport default {\r\n  name: 'TopCategory',\r\n  components: {\r\n    GoodsItem\r\n  },\r\n  setup () {\r\n    // 轮播图\r\n    const sliders = ref([])\r\n    findBanner().then(data => {\r\n      sliders.value = data.result\r\n    })\r\n    // 面包屑+所有分类\r\n    const store = useStore()\r\n    const route = useRoute()\r\n    const topCategory = computed(() => {\r\n      let cate = {}\r\n      const item = store.state.category.list.find(item => {\r\n        return item.id === route.params.id\r\n      })\r\n      if (item) cate = item\r\n      return cate\r\n    })\r\n    // 推荐商品\r\n    const subList = ref([])\r\n    const getSubList = () => {\r\n      findTopCategory(route.params.id).then(data => {\r\n        subList.value = data.result.children\r\n      })\r\n    }\r\n    watch(() => route.params.id, (newVal) => {\r\n      // 下面会出现点击二级类目时，也会触发id发生变化而发送请求\r\n      // newVal && getSubList()\r\n      // newVal && getSubList() 加上一个严谨判断，在顶级类名下才发请求\r\n      if (newVal && `/category/${newVal}` === route.path) getSubList()\r\n    }, { immediate: true })\r\n    return { sliders, topCategory, subList }\r\n  }\r\n}\r\n\r\n</script>\r\n<style  lang=\"less\" scoped>\r\n.top-category {\r\n  h3 {\r\n    font-size: 28px;\r\n    color: #666;\r\n    font-weight: normal;\r\n    text-align: center;\r\n    line-height: 100px;\r\n  }\r\n  .sub-list {\r\n    margin-top: 20px;\r\n    background-color: #fff;\r\n    ul {\r\n      display: flex;\r\n      padding: 0 32px;\r\n      flex-wrap: wrap;\r\n      li {\r\n        width: 168px;\r\n        height: 160px;\r\n        a {\r\n          text-align: center;\r\n          display: block;\r\n          font-size: 16px;\r\n          img {\r\n            width: 100px;\r\n            height: 100px;\r\n          }\r\n          p {\r\n            line-height: 40px;\r\n          }\r\n          &:hover {\r\n            color: @xtxColor;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .ref-goods {\r\n    background-color: #fff;\r\n    margin-top: 20px;\r\n    position: relative;\r\n    .head {\r\n      .xtx-more {\r\n        position: absolute;\r\n        top: 20px;\r\n        right: 20px;\r\n      }\r\n      .tag {\r\n        text-align: center;\r\n        color: #999;\r\n        font-size: 20px;\r\n        position: relative;\r\n        top: -20px;\r\n      }\r\n    }\r\n    .body {\r\n      display: flex;\r\n      justify-content: flex-start;\r\n      flex-wrap: wrap;\r\n      padding: 0 65px 30px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./index.vue?vue&type=template&id=89a5253e&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=89a5253e&lang=less&scoped=true\"\n\nimport exportComponent from \"D:\\\\桌面\\\\git\\\\YouGou\\\\ygshop\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-89a5253e\"]])\n\nexport default __exports__","<template>\r\n  <RouterLink :to=\"`/product/${goods.id}`\" class='goods-item'>\r\n    <img :src=\"goods.picture\" alt=\"\">\r\n    <p class=\"name ellipsis\">{{goods.name}}</p>\r\n    <p class=\"desc ellipsis\">{{goods.desc}}</p>\r\n    <p class=\"price\">&yen;{{goods.price}}</p>\r\n  </RouterLink>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'GoodsItem',\r\n  props: {\r\n    goods: {\r\n      type: Object,\r\n      default: () => {}\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n.goods-item {\r\n  display: block;\r\n  width: 220px;\r\n  padding: 20px 30px;\r\n  text-align: center;\r\n  .hoverShadow();\r\n  img {\r\n    width: 160px;\r\n    height: 160px;\r\n  }\r\n  p {\r\n    padding-top: 10px;\r\n  }\r\n  .name {\r\n    font-size: 16px;\r\n  }\r\n  .desc {\r\n    color: #999;\r\n    height: 29px;\r\n  }\r\n  .price {\r\n    color: @priceColor;\r\n    font-size: 20px;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./goods-itme.vue?vue&type=template&id=55571ba8&scoped=true\"\nimport script from \"./goods-itme.vue?vue&type=script&lang=js\"\nexport * from \"./goods-itme.vue?vue&type=script&lang=js\"\n\nimport \"./goods-itme.vue?vue&type=style&index=0&id=55571ba8&scoped=true&lang=less\"\n\nimport exportComponent from \"D:\\\\桌面\\\\git\\\\YouGou\\\\ygshop\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-55571ba8\"]])\n\nexport default __exports__"],"sourceRoot":""}