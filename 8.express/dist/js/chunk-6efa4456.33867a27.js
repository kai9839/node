(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6efa4456"],{"15bc":function(e,t,c){"use strict";c.r(t);var l=c("7a23");const a=e=>(Object(l["pushScopeId"])("data-v-72e7b6ca"),e=e(),Object(l["popScopeId"])(),e),o={class:"xtx-pay-checkout-page"},d={class:"container"},n={key:0,class:"wrapper"},r=a(()=>Object(l["createElementVNode"])("h3",{class:"box-title"},"收货地址",-1)),s={class:"box-body"},i=a(()=>Object(l["createElementVNode"])("h3",{class:"box-title"},"商品信息",-1)),b={class:"box-body"},j={class:"goods"},O=a(()=>Object(l["createElementVNode"])("thead",null,[Object(l["createElementVNode"])("tr",null,[Object(l["createElementVNode"])("th",{width:"520"},"商品信息"),Object(l["createElementVNode"])("th",{width:"170"},"单价"),Object(l["createElementVNode"])("th",{width:"170"},"数量"),Object(l["createElementVNode"])("th",{width:"170"},"小计"),Object(l["createElementVNode"])("th",{width:"170"},"实付")])],-1)),u={href:"javascript:;",class:"info"},m=["src"],p={class:"right"},V=Object(l["createStaticVNode"])('<h3 class="box-title" data-v-72e7b6ca>配送时间</h3><div class="box-body" data-v-72e7b6ca><a class="my-btn active" href="javascript:;" data-v-72e7b6ca>不限送货时间：周一至周日</a><a class="my-btn" href="javascript:;" data-v-72e7b6ca>工作日送货：周一至周五</a><a class="my-btn" href="javascript:;" data-v-72e7b6ca>双休日、假日送货：周六至周日</a></div><h3 class="box-title" data-v-72e7b6ca>支付方式</h3><div class="box-body" data-v-72e7b6ca><a class="my-btn active" href="javascript:;" data-v-72e7b6ca>在线支付</a><a class="my-btn" href="javascript:;" data-v-72e7b6ca>货到付款</a><span style="color:#999;" data-v-72e7b6ca>货到付款需付5元手续费</span></div><h3 class="box-title" data-v-72e7b6ca>金额明细</h3>',5),N={class:"box-body"},f={class:"total"},v=a(()=>Object(l["createElementVNode"])("dt",null,"商品件数：",-1)),h=a(()=>Object(l["createElementVNode"])("dt",null,"商品总价：",-1)),E=a(()=>Object(l["createElementVNode"])("dt",null,[Object(l["createTextVNode"])("运"),Object(l["createElementVNode"])("i"),Object(l["createTextVNode"])("费：")],-1)),x=a(()=>Object(l["createElementVNode"])("dt",null,"应付总额：",-1)),g={class:"price"},y={class:"submit"};function C(e,t,c,a,C,k){const w=Object(l["resolveComponent"])("XtxBreadItem"),D=Object(l["resolveComponent"])("XtxBread"),T=Object(l["resolveComponent"])("CheckoutAddress"),S=Object(l["resolveComponent"])("XtxButton");return Object(l["openBlock"])(),Object(l["createElementBlock"])("div",o,[Object(l["createElementVNode"])("div",d,[Object(l["createVNode"])(D,null,{default:Object(l["withCtx"])(()=>[Object(l["createVNode"])(w,{to:"/"},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("首页")]),_:1}),Object(l["createVNode"])(w,{to:"/cart"},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("购物车")]),_:1}),Object(l["createVNode"])(w,null,{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("填写订单")]),_:1})]),_:1}),a.checkoutInfo?(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",n,[r,Object(l["createElementVNode"])("div",s,[Object(l["createVNode"])(T,{onChange:a.changeAddress,list:a.checkoutInfo.userAddresses},null,8,["onChange","list"])]),i,Object(l["createElementVNode"])("div",b,[Object(l["createElementVNode"])("table",j,[O,Object(l["createElementVNode"])("tbody",null,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(a.checkoutInfo.goods,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("tr",{key:e.id},[Object(l["createElementVNode"])("td",null,[Object(l["createElementVNode"])("a",u,[Object(l["createElementVNode"])("img",{src:e.picture,alt:""},null,8,m),Object(l["createElementVNode"])("div",p,[Object(l["createElementVNode"])("p",null,Object(l["toDisplayString"])(e.name),1),Object(l["createElementVNode"])("p",null,Object(l["toDisplayString"])(e.attrsText),1)])])]),Object(l["createElementVNode"])("td",null,"¥"+Object(l["toDisplayString"])(e.payPrice),1),Object(l["createElementVNode"])("td",null,Object(l["toDisplayString"])(e.count),1),Object(l["createElementVNode"])("td",null,"¥"+Object(l["toDisplayString"])(e.totalPrice),1),Object(l["createElementVNode"])("td",null,"¥"+Object(l["toDisplayString"])(e.totalPayPrice),1)]))),128))])])]),V,Object(l["createElementVNode"])("div",N,[Object(l["createElementVNode"])("div",f,[Object(l["createElementVNode"])("dl",null,[v,Object(l["createElementVNode"])("dd",null,Object(l["toDisplayString"])(a.checkoutInfo.summary.goodsCount)+"件",1)]),Object(l["createElementVNode"])("dl",null,[h,Object(l["createElementVNode"])("dd",null,"¥"+Object(l["toDisplayString"])(a.checkoutInfo.summary.totalPrice),1)]),Object(l["createElementVNode"])("dl",null,[E,Object(l["createElementVNode"])("dd",null,"¥"+Object(l["toDisplayString"])(a.checkoutInfo.summary.postFee),1)]),Object(l["createElementVNode"])("dl",null,[x,Object(l["createElementVNode"])("dd",g,"¥"+Object(l["toDisplayString"])(a.checkoutInfo.summary.totalPayPrice),1)])])]),Object(l["createElementVNode"])("div",y,[Object(l["createVNode"])(S,{onClick:a.submitOrder,type:"primary"},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("提交订单")]),_:1},8,["onClick"])])])):Object(l["createCommentVNode"])("",!0)])])}c("14d9");const k=e=>(Object(l["pushScopeId"])("data-v-5d99cb9e"),e=e(),Object(l["popScopeId"])(),e),w={class:"checkout-address"},D={class:"text"},T={key:0,class:"none"},S={key:1},A=k(()=>Object(l["createElementVNode"])("span",null,[Object(l["createTextVNode"])("收"),Object(l["createElementVNode"])("i"),Object(l["createTextVNode"])("货"),Object(l["createElementVNode"])("i"),Object(l["createTextVNode"])("人：")],-1)),B=k(()=>Object(l["createElementVNode"])("span",null,"联系方式：",-1)),I=k(()=>Object(l["createElementVNode"])("span",null,"收货地址：",-1)),_={class:"action"},L={class:"itemContent"},P=["onClick"],X=k(()=>Object(l["createElementVNode"])("span",null,[Object(l["createTextVNode"])("收"),Object(l["createElementVNode"])("i"),Object(l["createTextVNode"])("货"),Object(l["createElementVNode"])("i"),Object(l["createTextVNode"])("人：")],-1)),U=k(()=>Object(l["createElementVNode"])("span",null,"联系方式：",-1)),M=k(()=>Object(l["createElementVNode"])("span",null,"收货地址：",-1)),J=["onClick"];function F(e,t,c,a,o,d){const n=Object(l["resolveComponent"])("XtxButton"),r=Object(l["resolveComponent"])("XtxDialog"),s=Object(l["resolveComponent"])("AddressEdit");return Object(l["openBlock"])(),Object(l["createElementBlock"])(l["Fragment"],null,[Object(l["createElementVNode"])("div",w,[Object(l["createElementVNode"])("div",D,[a.showAddress?Object(l["createCommentVNode"])("",!0):(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",T,"您需要先添加收货地址才可提交订单。")),a.showAddress?(Object(l["openBlock"])(),Object(l["createElementBlock"])("ul",S,[Object(l["createElementVNode"])("li",null,[A,Object(l["createTextVNode"])(Object(l["toDisplayString"])(a.showAddress.receiver),1)]),Object(l["createElementVNode"])("li",null,[B,Object(l["createTextVNode"])(Object(l["toDisplayString"])(a.showAddress.contact),1)]),Object(l["createElementVNode"])("li",null,[I,Object(l["createTextVNode"])(Object(l["toDisplayString"])(a.showAddress.fullLocation.replace(/ /g,"")+a.showAddress.address),1)])])):Object(l["createCommentVNode"])("",!0),a.showAddress?(Object(l["openBlock"])(),Object(l["createElementBlock"])("a",{key:2,onClick:t[0]||(t[0]=e=>a.openAddressEdit(a.showAddress)),href:"javascript:;"},"修改地址")):Object(l["createCommentVNode"])("",!0)]),Object(l["createElementVNode"])("div",_,[Object(l["createVNode"])(n,{onClick:t[1]||(t[1]=e=>a.openDialog()),class:"btn"},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("切换地址")]),_:1}),Object(l["createVNode"])(n,{onClick:t[2]||(t[2]=e=>a.openAddressEdit()),class:"btn"},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("添加地址")]),_:1})])]),Object(l["createVNode"])(r,{title:"切换收货地址",visible:a.dialogVisible,"onUpdate:visible":t[4]||(t[4]=e=>a.dialogVisible=e)},{footer:Object(l["withCtx"])(()=>[Object(l["createVNode"])(n,{onClick:t[3]||(t[3]=e=>a.dialogVisible=!1),type:"gray",style:{"margin-right":"20px"}},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("取消")]),_:1}),Object(l["createVNode"])(n,{onClick:a.confirmAddress,type:"primary"},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("确认")]),_:1},8,["onClick"])]),default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",L,[(Object(l["openBlock"])(!0),Object(l["createElementBlock"])(l["Fragment"],null,Object(l["renderList"])(c.list,e=>(Object(l["openBlock"])(),Object(l["createElementBlock"])("div",{class:Object(l["normalizeClass"])(["text item",{active:a.selectedAddress&&e.id===a.selectedAddress.id}]),onClick:t=>a.selectedAddress=e,key:e.id},[Object(l["createElementVNode"])("ul",null,[Object(l["createElementVNode"])("li",null,[X,Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.receiver),1)]),Object(l["createElementVNode"])("li",null,[U,Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.contact),1)]),Object(l["createElementVNode"])("li",null,[M,Object(l["createTextVNode"])(Object(l["toDisplayString"])(e.fullLocation.replace(/ /g,"")+e.address),1)])]),Object(l["createElementVNode"])("a",{onClick:t=>a.showDelete(e.id),href:"JavaScript:;",class:"iconfont icon-close-new"},null,8,J)],10,P))),128))])]),_:1},8,["visible"]),Object(l["createVNode"])(s,{onOnSuccess:a.successHandler,ref:"addressEdit"},null,8,["onOnSuccess"]),Object(l["createVNode"])(r,{title:"删除地址信息",visible:a.deleteDialog,"onUpdate:visible":t[7]||(t[7]=e=>a.deleteDialog=e)},{footer:Object(l["withCtx"])(()=>[Object(l["createVNode"])(n,{onClick:t[5]||(t[5]=e=>a.deleteDialog=!1),type:"gray",style:{"margin-right":"20px"}},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("取消")]),_:1}),Object(l["createVNode"])(n,{onClick:t[6]||(t[6]=e=>a.delAddress()),type:"primary"},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("确认")]),_:1})]),default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])(" 是否删除地址信息？ ")]),_:1},8,["visible"])],64)}c("3c65");const q=e=>(Object(l["pushScopeId"])("data-v-6d6d8264"),e=e(),Object(l["popScopeId"])(),e),z={class:"address-edit"},$={class:"xtx-form"},H={class:"xtx-form-item"},R=q(()=>Object(l["createElementVNode"])("div",{class:"label"},"收货人：",-1)),G={class:"field"},K={class:"xtx-form-item"},Q=q(()=>Object(l["createElementVNode"])("div",{class:"label"},"手机号：",-1)),W={class:"field"},Y={class:"xtx-form-item"},Z=q(()=>Object(l["createElementVNode"])("div",{class:"label"},"地区：",-1)),ee={class:"field"},te={class:"xtx-form-item"},ce=q(()=>Object(l["createElementVNode"])("div",{class:"label"},"详细地址：",-1)),le={class:"field"},ae={class:"xtx-form-item"},oe=q(()=>Object(l["createElementVNode"])("div",{class:"label"},"邮政编码：",-1)),de={class:"field"},ne={class:"xtx-form-item"},re=q(()=>Object(l["createElementVNode"])("div",{class:"label"},"地址标签：",-1)),se={class:"field"};function ie(e,t,c,a,o,d){const n=Object(l["resolveComponent"])("XtxCity"),r=Object(l["resolveComponent"])("XtxButton"),s=Object(l["resolveComponent"])("XtxDialog");return Object(l["openBlock"])(),Object(l["createBlock"])(s,{title:(a.formData.id?"修改":"添加")+"收货地址",visible:a.dialogVisible,"onUpdate:visible":t[7]||(t[7]=e=>a.dialogVisible=e)},{footer:Object(l["withCtx"])(()=>[Object(l["createVNode"])(r,{onClick:t[5]||(t[5]=e=>a.dialogVisible=!1),type:"gray",style:{"margin-right":"20px"}},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("取消")]),_:1}),Object(l["createVNode"])(r,{onClick:t[6]||(t[6]=e=>a.submit()),type:"primary"},{default:Object(l["withCtx"])(()=>[Object(l["createTextVNode"])("确认")]),_:1})]),default:Object(l["withCtx"])(()=>[Object(l["createElementVNode"])("div",z,[Object(l["createElementVNode"])("div",$,[Object(l["createElementVNode"])("div",H,[R,Object(l["createElementVNode"])("div",G,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>a.formData.receiver=e),class:"input",placeholder:"请输入收货人"},null,512),[[l["vModelText"],a.formData.receiver]])])]),Object(l["createElementVNode"])("div",K,[Q,Object(l["createElementVNode"])("div",W,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>a.formData.contact=e),class:"input",placeholder:"请输入手机号"},null,512),[[l["vModelText"],a.formData.contact]])])]),Object(l["createElementVNode"])("div",Y,[Z,Object(l["createElementVNode"])("div",ee,[Object(l["createVNode"])(n,{fullLocation:a.formData.fullLocation,onChange:a.changeCty,placeholder:"请选择所在地区"},null,8,["fullLocation","onChange"])])]),Object(l["createElementVNode"])("div",te,[ce,Object(l["createElementVNode"])("div",le,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>a.formData.address=e),class:"input",placeholder:"请输入详细地址"},null,512),[[l["vModelText"],a.formData.address]])])]),Object(l["createElementVNode"])("div",ae,[oe,Object(l["createElementVNode"])("div",de,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>a.formData.postalCode=e),class:"input",placeholder:"请输入邮政编码"},null,512),[[l["vModelText"],a.formData.postalCode]])])]),Object(l["createElementVNode"])("div",ne,[re,Object(l["createElementVNode"])("div",se,[Object(l["withDirectives"])(Object(l["createElementVNode"])("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>a.formData.addressTags=e),class:"input",placeholder:"请输入地址标签，逗号分隔"},null,512),[[l["vModelText"],a.formData.addressTags]])])])])])]),_:1},8,["title","visible"])}var be=c("f8b7"),je=c("2f59"),Oe={name:"AddressEdit",setup(e,{emit:t}){const c=Object(l["ref"])(!1),a=e=>{if(e&&e.id)for(const t in e)o[t]=e[t];else for(const t in o)o[t]="isDefault"===t?1:null;c.value=!0},o=Object(l["reactive"])({id:null,receiver:null,contact:null,provinceCode:null,cityCode:null,countyCode:null,address:null,postalCode:null,addressTags:null,isDefault:1,fullLocation:null}),d=e=>{o.provinceCode=e.provinceCode,o.cityCode=e.cityCode,o.countyCode=e.countyCode,o.fullLocation=e.fullLocation},n=()=>{o.id?Object(be["g"])(o).then(e=>{Object(je["a"])({text:"修改收货地址成功",type:"success"}),c.value=!1,t("on-success",o)}):Object(be["a"])(o).then(e=>{Object(je["a"])({text:"添加收货地址成功",type:"success"}),o.id=e.result.id,c.value=!1,t("on-success",o)})};return{dialogVisible:c,open:a,formData:o,changeCty:d,submit:n}}},ue=(c("aa2f"),c("6b0d")),me=c.n(ue);const pe=me()(Oe,[["render",ie],["__scopeId","data-v-6d6d8264"]]);var Ve=pe,Ne={name:"CheckoutAddress",components:{AddressEdit:Ve},props:{list:{type:Array,default:()=>[]}},emits:["change"],setup(e,{emit:t}){const c=Object(l["ref"])(!1);let a=Object(l["ref"])(null);const o=e=>{a=e,c.value=!0},d=Object(l["ref"])(null);if(e.list.length){const t=e.list.find(e=>0===e.isDefault);t?d.value=t:e.list.length&&(d.value=e.list[0])}t("change",d.value&&d.value.id);const n=Object(l["ref"])(!1),r=()=>{n.value=!0,i.value=null},s=()=>{n.value=!1,d.value=i.value,t("change",d.value&&d.value.id)},i=Object(l["ref"])(null),b=Object(l["ref"])(null),j=e=>{b.value.open(e)},O=()=>{Object(be["e"])(a).then(()=>{Object(je["a"])({type:"success",text:"删除成功"}),c.value=!1,t("change",a,"del"),s()})},u=t=>{const c=e.list.find(e=>e.id===t.id);if(c)for(const e in c)c[e]=t[e];else{const c=JSON.stringify(t);e.list.unshift(JSON.parse(c))}};return{showAddress:d,dialogVisible:n,selectedAddress:i,openDialog:r,confirmAddress:s,addressEdit:b,openAddressEdit:j,successHandler:u,delAddress:O,deleteDialog:c,showDelete:o}}};c("64b7");const fe=me()(Ne,[["render",F],["__scopeId","data-v-5d99cb9e"]]);var ve=fe,he=c("6605"),Ee={name:"XtxPayCheckoutPage",components:{CheckoutAddress:ve},setup(){const e=Object(l["ref"])(null),t=Object(he["c"])();t.query.orderId?Object(be["k"])(t.query.orderId).then(t=>{e.value=t.result,c.goods=t.result.goods.map(({skuId:e,count:t})=>({skuId:e,count:t}))}):Object(be["h"])().then(t=>{e.value=t.result,c.goods=t.result.goods.map(({skuId:e,count:t})=>({skuId:e,count:t}))});const c=Object(l["reactive"])({addressId:null,payType:1,buyerMessage:"",goods:[]}),a=(t,l)=>{"del"===l?Object(be["h"])().then(t=>{e.value=t.result}):c.addressId=t},o=Object(he["d"])(),d=()=>{if(!c.addressId)return Object(je["a"])({text:"请选择收货地址"});Object(be["d"])(c).then(e=>{o.push({path:"/member/pay",query:{id:e.result.id}})})};return{checkoutInfo:e,changeAddress:a,submitOrder:d}}};c("8d37");const xe=me()(Ee,[["render",C],["__scopeId","data-v-72e7b6ca"]]);t["default"]=xe},"64b7":function(e,t,c){"use strict";c("f5f7")},"8d37":function(e,t,c){"use strict";c("ebca")},aa2f:function(e,t,c){"use strict";c("fd8e")},ebca:function(e,t,c){},f5f7:function(e,t,c){},f8b7:function(e,t,c){"use strict";c.d(t,"h",(function(){return a})),c.d(t,"a",(function(){return o})),c.d(t,"g",(function(){return d})),c.d(t,"e",(function(){return n})),c.d(t,"d",(function(){return r})),c.d(t,"i",(function(){return s})),c.d(t,"j",(function(){return i})),c.d(t,"b",(function(){return b})),c.d(t,"f",(function(){return j})),c.d(t,"c",(function(){return O})),c.d(t,"l",(function(){return u})),c.d(t,"k",(function(){return m}));var l=c("b775");const a=()=>Object(l["b"])("/member/order/pre","get"),o=e=>Object(l["b"])("/member/address","post",e),d=e=>Object(l["b"])("/member/address/"+e.id,"put",e),n=e=>Object(l["b"])("/member/address/"+e,"delete"),r=e=>Object(l["b"])("/member/order","post",e),s=e=>Object(l["b"])("/member/order/"+e,"get"),i=({orderState:e,page:t,pageSize:c})=>Object(l["b"])("/member/order","get",{orderState:e,page:t,pageSize:c}),b=(e,t)=>Object(l["b"])(`/member/order/${e}/cancel`,"put",{cancelReason:t}),j=e=>Object(l["b"])("/member/order","delete",{ids:e}),O=e=>Object(l["b"])(`/member/order/${e}/receipt`,"put"),u=e=>Object(l["b"])(`/member/order/${e}/logistics`,"get"),m=e=>Object(l["b"])("/member/order/repurchase/"+e,"get")},fd8e:function(e,t,c){}}]);
//# sourceMappingURL=chunk-6efa4456.33867a27.js.map