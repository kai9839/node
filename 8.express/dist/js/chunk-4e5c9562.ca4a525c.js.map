{"version":3,"sources":["webpack:///./src/views/login/index.vue?41d5","webpack:///./src/views/login/components/login-form.vue?b63c","webpack:///./src/assets/images/qrcode.jpg","webpack:///./src/views/login/index.vue","webpack:///./src/views/login/components/login-form.vue","webpack:///./src/views/login/components/login-form.vue?0ba8","webpack:///./src/views/login/index.vue?1969"],"names":["module","exports","class","_createElementVNode","src","_imports_0","alt","href","_hoisted_4","_hoisted_5","_createVNode","_component_LoginHeader","_hoisted_1","_hoisted_2","onClick","_cache","$event","$setup","activeName","_normalizeClass","active","_createBlock","_component_LoginForm","key","_createElementBlock","_hoisted_3","_hoisted_6","_component_LoginFooter","isMsgLogin","_component_Form","ref","validation-schema","schema","autocomplete","errors","_Fragment","_hoisted_15","_hoisted_16","_hoisted_17","_component_Field","error","mobile","form","name","type","placeholder","_hoisted_18","_hoisted_19","_toDisplayString","_hoisted_20","_hoisted_21","_hoisted_22","code","send","time","_hoisted_23","_hoisted_24","_hoisted_7","account","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","password","_hoisted_13","_hoisted_14","_hoisted_25","_hoisted_26","as","isAgree","_component_XtxCheckbox","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","login","_hoisted_33","components","Form","Field","setup","reactive","mySchema","formCom","watch","value","resetForm","store","useStore","router","useRouter","route","useRoute","async","valid","validate","data","userMobileLogin","userAccountLogin","id","avatar","nickname","token","result","commit","dispatch","then","push","query","redirectUrl","Message","text","e","response","message","pause","resume","useIntervalFn","onUnmounted","userMobileLoginMsg","setFieldError","__exports__","LoginHeader","LoginFooter","LoginForm","render"],"mappings":"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","file":"js/chunk-4e5c9562.ca4a525c.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=6bcca93c&scoped=true&lang=less\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--11-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./login-form.vue?vue&type=style&index=0&id=3b1a8544&scoped=true&lang=less\"","module.exports = \"data:image/jpeg;base64,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\"","<template>\r\n  <LoginHeader>欢迎登录</LoginHeader>\r\n    <section class=\"login-section\">\r\n      <div class=\"wrapper\">\r\n        <nav>\r\n        <a @click=\"activeName='account'\" :class=\"{active:activeName==='account'}\" href=\"javascript:;\">账户登录</a>\r\n        <a @click=\"activeName='qrcode'\" :class=\"{active:activeName==='qrcode'}\" href=\"javascript:;\">扫码登录</a>\r\n        </nav>\r\n        <!-- 表单 -->\r\n        <LoginForm v-if=\"activeName==='account'\"></LoginForm>\r\n        <!-- 二维码 -->\r\n        <div v-if=\"activeName==='qrcode'\" class=\"qrcode-box\">\r\n          <img src=\"@/assets/images/qrcode.jpg\" alt=\"\">\r\n        <p>打开 <a href=\"javascript:;\">小兔鲜App</a> 扫码登录</p>\r\n        </div>\r\n      </div>\r\n    </section>\r\n    <LoginFooter />\r\n</template>\r\n<script>\r\nimport LoginHeader from './components/login-header'\r\nimport LoginFooter from './components/login-footer'\r\nimport LoginForm from './components/login-form'\r\nimport { ref } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRoute } from 'vue-router'\r\nexport default {\r\n  name: 'PageLogin',\r\n  components: { LoginHeader, LoginFooter, LoginForm },\r\n  setup () {\r\n    const activeName = ref('account')\r\n\r\n    // 存储回跳地址\r\n    const store = useStore()\r\n    const route = useRoute()\r\n    store.commit('user/setRedirectUrl', route.query.redirectUrl || '/')\r\n\r\n    return { activeName }\r\n  }\r\n}\r\n</script>\r\n<style scoped lang=\"less\">\r\n.login-section {\r\n  background: url(../../assets/images/login-bg.png) no-repeat center / cover;\r\n  height: 488px;\r\n  position: relative;\r\n  .wrapper {\r\n    width: 380px;\r\n    background: #fff;\r\n    min-height: 400px;\r\n    position: absolute;\r\n    left: 50%;\r\n    top: 54px;\r\n    transform: translate3d(100px,0,0);\r\n    box-shadow: 0 0 10px rgba(0,0,0,.15);\r\n    nav {\r\n      height: 55px;\r\n      border-bottom: 1px solid #f5f5f5;\r\n      display: flex;\r\n      padding: 0 40px;\r\n      text-align: right;\r\n      align-items: center;\r\n      a {\r\n        flex: 1;\r\n        line-height: 1;\r\n        display: inline-block;\r\n        font-size: 18px;\r\n        position: relative;\r\n        &:first-child {\r\n          border-right: 1px solid #f5f5f5;\r\n          text-align: left;\r\n        }\r\n        &.active{\r\n          color: @xtxColor;\r\n          font-weight: bold;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n    // 二维码容器\r\n    .qrcode-box {\r\n      text-align: center;\r\n      padding-top: 40px;\r\n      p {\r\n        margin-top: 20px;\r\n        a {\r\n          color: @xtxColor;\r\n          font-size: 16px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"account-box\">\r\n    <div class=\"toggle\">\r\n      <a @click=\"isMsgLogin=false\" href=\"javascript:;\" v-if=\"isMsgLogin\">\r\n        <i class=\"iconfont icon-user\"></i> 使用账号登录\r\n      </a>\r\n      <a @click=\"isMsgLogin=true\" href=\"javascript:;\" v-else>\r\n        <i class=\"iconfont icon-msg\"></i> 使用短信登录\r\n      </a>\r\n    </div>\r\n    <Form ref=\"formCom\" class=\"form\" :validation-schema=\"schema\" v-slot=\"{errors}\" autocomplete=\"off\">\r\n      <template v-if=\"!isMsgLogin\">\r\n        <div class=\"form-item\">\r\n          <div class=\"input\">\r\n            <i class=\"iconfont icon-user\"></i>\r\n            <Field :class=\"{error:errors.account}\" v-model=\"form.account\" name=\"account\" type=\"text\" placeholder=\"请输入用户名\" />\r\n          </div>\r\n          <div class=\"error\" v-if=\"errors.account\">\r\n            <i class=\"iconfont icon-warning\" />\r\n            {{errors.account}}\r\n          </div>\r\n        </div>\r\n        <div class=\"form-item\">\r\n          <div class=\"input\">\r\n            <i class=\"iconfont icon-lock\"></i>\r\n            <Field :class=\"{error:errors.password}\" v-model=\"form.password\" name=\"password\" type=\"password\" placeholder=\"请输入密码\" />\r\n          </div>\r\n          <div class=\"error\" v-if=\"errors.password\">\r\n            <i class=\"iconfont icon-warning\" />\r\n            {{errors.password}}\r\n          </div>\r\n        </div>\r\n      </template>\r\n      <template v-else>\r\n        <div class=\"form-item\">\r\n          <div class=\"input\">\r\n            <i class=\"iconfont icon-user\"></i>\r\n            <Field :class=\"{error:errors.mobile}\" v-model=\"form.mobile\" name=\"mobile\" type=\"text\" placeholder=\"请输入手机号\" />\r\n          </div>\r\n          <div class=\"error\" v-if=\"errors.mobile\">\r\n            <i class=\"iconfont icon-warning\" />\r\n            {{errors.mobile}}\r\n          </div>\r\n        </div>\r\n        <div class=\"form-item\">\r\n          <div class=\"input\">\r\n            <i class=\"iconfont icon-code\"></i>\r\n            <Field :class=\"{error:errors.code}\" v-model=\"form.code\" name=\"code\" type=\"text\" placeholder=\"请输入验证码\" />\r\n            <span @click=\"send()\" class=\"code\">\r\n              {{time===0?'发送验证码':`${time}秒后发送`}}\r\n            </span>\r\n          </div>\r\n          <div class=\"error\" v-if=\"errors.code\">\r\n            <i class=\"iconfont icon-warning\" />\r\n            {{errors.code}}\r\n          </div>\r\n        </div>\r\n      </template>\r\n      <div class=\"form-item\">\r\n        <div class=\"agree\">\r\n          <Field as=\"XtxCheckbox\" name=\"isAgree\" v-model=\"form.isAgree\" v-show=\"false\" />\r\n          <XtxCheckbox v-model=\"form.isAgree\" />\r\n          <span>我已同意</span>\r\n          <a href=\"javascript:;\">《隐私条款》</a>\r\n          <span>和</span>\r\n          <a href=\"javascript:;\">《服务条款》</a>\r\n        </div>\r\n        <div class=\"error\" v-if=\"errors.isAgree\">\r\n          <i class=\"iconfont icon-warning\" />\r\n          {{errors.isAgree}}\r\n        </div>\r\n      </div>\r\n      <a @click=\"login()\" href=\"javascript:;\" class=\"btn\">登录</a>\r\n    </Form>\r\n    <div class=\"action\">\r\n      <!-- <span id=\"qqLoginBtn\"></span> -->\r\n      <a href=\"https://graph.qq.com/oauth2.0/authorize?client_id=100556005&response_type=token&scope=all&redirect_uri=http%3A%2F%2Fwww.corho.com%3A8080%2F%23%2Flogin%2Fcallback\">\r\n        <img src=\"https://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/Connect_logo_7.png\" alt=\"\">\r\n      </a>\r\n      <div class=\"url\">\r\n        <a href=\"javascript:;\">忘记密码</a>\r\n        <a href=\"javascript:;\">免费注册</a>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { onUnmounted, reactive, ref, watch } from 'vue'\r\nimport { Form, Field } from 'vee-validate'\r\nimport schema from '@/utils/vee-validate-schema'\r\nimport Message from '@/components/library/Message'\r\nimport { userAccountLogin, userMobileLogin, userMobileLoginMsg } from '@/api/user'\r\nimport { useStore } from 'vuex'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { useIntervalFn } from '@vueuse/core'\r\n// import QC from 'qc'\r\nexport default {\r\n  name: 'LoginForm',\r\n  components: { Form, Field },\r\n  setup () {\r\n    // 切换短信登录\r\n    const isMsgLogin = ref(false)\r\n    // 表单数据对象\r\n    const form = reactive({\r\n      isAgree: true,\r\n      account: null,\r\n      password: null,\r\n      mobile: null,\r\n      code: null\r\n    })\r\n\r\n    // vee-validate 校验基本步骤\r\n    // 1. 导入 Form Field 组件 将 form 和 input 进行替换，需要加上name用来指定将来的校验规则函数的\r\n    // 2. Field 需要进行数据绑定，字段名称最好和后台接口需要的一致\r\n    // 3. 定义Field的name属性指定的校验规则函数，Form的validation-schema接受定义好的校验规则是对象\r\n    // 4. 自定义组件需要校验必须先支持v-model 然后Field使用as指定为组件名称\r\n    const mySchema = {\r\n      // 校验函数规则：返回true就是校验成功，返回一个字符串就是失败，字符串就是错误提示\r\n      account: schema.account,\r\n      password: schema.password,\r\n      mobile: schema.mobile,\r\n      code: schema.code,\r\n      isAgree: schema.isAgree\r\n    }\r\n\r\n    // 监听isMsgLogin重置表单（数据+清除校验结果）\r\n    const formCom = ref(null)\r\n    watch(isMsgLogin, () => {\r\n      // 重置数据\r\n      form.isAgree = true\r\n      form.account = null\r\n      form.password = null\r\n      form.mobile = null\r\n      form.code = null\r\n      // 如果是没有销毁Field组件，之前的校验结果是不会清除  例如：v-show切换的\r\n      // Form组件提供了一个 resetForm 函数清除校验结果\r\n      formCom.value.resetForm()\r\n    })\r\n\r\n    // setup中获取组件实例 proxy\r\n    // const { proxy } = getCurrentInstance()\r\n    // proxy.$message({ text: '111' })\r\n\r\n    // 需要在点击登录的时候对整体表单进行校验\r\n    const store = useStore()\r\n    const router = useRouter()\r\n    const route = useRoute()\r\n    // 登录提交\r\n    const login = async () => {\r\n      // Form组件提供了一个 validate 函数作为整体表单校验，当是返回的是一个promise\r\n      const valid = await formCom.value.validate()\r\n      if (valid) {\r\n        let data = null\r\n        try {\r\n          if (isMsgLogin.value) {\r\n            // **手机号登录\r\n            // 2.1. 准备一个API做手机号登录\r\n            // 2.2. 调用API函数\r\n            // 2.3. 成功：存储用户信息 + 跳转至来源页或者首页 + 消息提示\r\n            // 2.4. 失败：消息提示\r\n            const { mobile, code } = form\r\n            data = await userMobileLogin({ mobile, code })\r\n          } else {\r\n            // **帐号登录\r\n            // 1. 准备一个API做帐号登录\r\n            // 2. 调用API函数\r\n            // 3. 成功：存储用户信息 + 跳转至来源页或者首页 + 消息提示\r\n            // 4. 失败：消息提示\r\n            const { account, password } = form\r\n            data = await userAccountLogin({ account, password })\r\n          }\r\n          // 存储用户信息\r\n          const { id, account, avatar, mobile, nickname, token } = data.result\r\n          store.commit('user/setUser', { id, account, avatar, mobile, nickname, token })\r\n          // 合并购物车操作\r\n          store.dispatch('cart/mergeLocalCart').then(() => {\r\n            // 进行跳转\r\n            router.push(route.query.redirectUrl || '/')\r\n            // 成功消息提示\r\n            Message({ type: 'success', text: '登录成功' })\r\n          })\r\n        } catch (e) {\r\n          // 失败提示\r\n          if (e.response.data) {\r\n            Message({ type: 'error', text: e.response.data.message || '登录失败' })\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // pause 暂停 resume 开始\r\n    // useIntervalFn(回调函数,执行间隔,是否立即开启)\r\n    const time = ref(0)\r\n    const { pause, resume } = useIntervalFn(() => {\r\n      time.value--\r\n      if (time.value <= 0) {\r\n        pause()\r\n      }\r\n    }, 1000, false)\r\n    onUnmounted(() => {\r\n      pause()\r\n    })\r\n\r\n    // 1. 发送验证码\r\n    // 1.1 绑定发送验证码按钮点击事件\r\n    // 1.2 校验手机号，如果成功才去发送短信（定义API），请求成功开启60s的倒计时，不能再次点击，倒计时结束恢复\r\n    // 1.3 如果失败，失败的校验样式显示出来\r\n    const send = async () => {\r\n      const valid = mySchema.mobile(form.mobile)\r\n      if (valid === true) {\r\n        // 通过\r\n        if (time.value === 0) {\r\n          // 没有倒计时才可以发送\r\n          await userMobileLoginMsg(form.mobile)\r\n          Message({ type: 'success', text: '发送成功' })\r\n          time.value = 60\r\n          resume()\r\n        }\r\n      } else {\r\n        // 失败，使用vee的错误函数显示错误信息 setFieldError(字段,错误信息)\r\n        formCom.value.setFieldError('mobile', valid)\r\n      }\r\n    }\r\n\r\n    // 初始化QQ登录按钮 （官方）\r\n    // 1. 准备span有id = qqLoginBtn\r\n    // 2. QC.Login({btnId:\"qqLoginBtn\"})\r\n    // onMounted(() => {\r\n    //   QC.Login({ btnId: 'qqLoginBtn' })\r\n    // })\r\n\r\n    return { isMsgLogin, form, schema: mySchema, formCom, login, send, time }\r\n  }\r\n}\r\n</script>\r\n<style scoped lang=\"less\">\r\n// 账号容器\r\n.account-box {\r\n  .toggle {\r\n    padding: 15px 40px;\r\n    text-align: right;\r\n    a {\r\n      color: @xtxColor;\r\n      i {\r\n        font-size: 14px;\r\n      }\r\n    }\r\n  }\r\n  .form {\r\n    padding: 0 40px;\r\n    &-item {\r\n      margin-bottom: 28px;\r\n      .input {\r\n        position: relative;\r\n        height: 36px;\r\n        > i {\r\n          width: 34px;\r\n          height: 34px;\r\n          background: #cfcdcd;\r\n          color: #fff;\r\n          position: absolute;\r\n          left: 1px;\r\n          top: 1px;\r\n          text-align: center;\r\n          line-height: 34px;\r\n          font-size: 18px;\r\n        }\r\n        input {\r\n          padding-left: 44px;\r\n          border: 1px solid #cfcdcd;\r\n          height: 36px;\r\n          line-height: 36px;\r\n          width: 100%;\r\n          &.error {\r\n            border-color: @priceColor;\r\n          }\r\n          &.active,&:focus {\r\n            border-color: @xtxColor;\r\n          }\r\n        }\r\n        .code {\r\n          position: absolute;\r\n          right: 1px;\r\n          top: 1px;\r\n          text-align: center;\r\n          line-height: 34px;\r\n          font-size: 14px;\r\n          background: #f5f5f5;\r\n          color: #666;\r\n          width: 90px;\r\n          height: 34px;\r\n          cursor: pointer;\r\n        }\r\n      }\r\n      > .error {\r\n        position: absolute;\r\n        font-size: 12px;\r\n        line-height: 28px;\r\n        color: @priceColor;\r\n        i {\r\n          font-size: 14px;\r\n          margin-right: 2px;\r\n        }\r\n      }\r\n    }\r\n    .agree {\r\n      a {\r\n        color: #069;\r\n      }\r\n    }\r\n    .btn {\r\n      display: block;\r\n      width: 100%;\r\n      height: 40px;\r\n      color: #fff;\r\n      text-align: center;\r\n      line-height: 40px;\r\n      background: @xtxColor;\r\n      &.disabled {\r\n        background: #cfcdcd;\r\n      }\r\n    }\r\n  }\r\n  .action {\r\n    padding: 20px 40px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    .url {\r\n      a {\r\n        color: #999;\r\n        margin-left: 10px;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./login-form.vue?vue&type=template&id=3b1a8544&scoped=true\"\nimport script from \"./login-form.vue?vue&type=script&lang=js\"\nexport * from \"./login-form.vue?vue&type=script&lang=js\"\n\nimport \"./login-form.vue?vue&type=style&index=0&id=3b1a8544&scoped=true&lang=less\"\n\nimport exportComponent from \"D:\\\\桌面\\\\git\\\\YouGou\\\\ygshop\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-3b1a8544\"]])\n\nexport default __exports__","import { render } from \"./index.vue?vue&type=template&id=6bcca93c&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=6bcca93c&scoped=true&lang=less\"\n\nimport exportComponent from \"D:\\\\桌面\\\\git\\\\YouGou\\\\ygshop\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6bcca93c\"]])\n\nexport default __exports__"],"sourceRoot":""}