(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e187840"],{"06b7":function(e,t,c){"use strict";c.r(t);var a=c("7a23");const o={class:"sub-category"},r={class:"container"},n={class:"goods-list"};function s(e,t,c,s,l,i){const d=Object(a["resolveComponent"])("SubBread"),b=Object(a["resolveComponent"])("SubFilter"),u=Object(a["resolveComponent"])("SubSort"),j=Object(a["resolveComponent"])("GoodsItem"),m=Object(a["resolveComponent"])("XtxInfiniteLoading");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",o,[Object(a["createElementVNode"])("div",r,[Object(a["createVNode"])(d),Object(a["createVNode"])(b),Object(a["createElementVNode"])("div",n,[Object(a["createVNode"])(u,{onSortChange:s.sortChange},null,8,["onSortChange"]),Object(a["createElementVNode"])("ul",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(s.goodsList,e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:e.id},[Object(a["createVNode"])(j,{goods:e},null,8,["goods"])]))),128))]),Object(a["createVNode"])(m,{loading:s.loading,finished:s.finished,onInfinite:s.getData},null,8,["loading","finished","onInfinite"])])])])}c("14d9");function l(e,t,c,o,r,n){const s=Object(a["resolveComponent"])("XtxBreadItem"),l=Object(a["resolveComponent"])("XtxBread");return Object(a["openBlock"])(),Object(a["createBlock"])(l,null,{default:Object(a["withCtx"])(()=>[Object(a["createVNode"])(s,{to:"/"},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("首页")]),_:1}),o.category.top?(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:0,to:"/category/"+o.category.top.id},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(o.category.top.name),1)]),_:1},8,["to"])):Object(a["createCommentVNode"])("",!0),Object(a["createVNode"])(a["Transition"],{name:"fade-right",mode:"out-in"},{default:Object(a["withCtx"])(()=>[o.category.sub?(Object(a["openBlock"])(),Object(a["createBlock"])(s,{key:o.category.sub.id},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])(Object(a["toDisplayString"])(o.category.sub.name),1)]),_:1})):Object(a["createCommentVNode"])("",!0)]),_:1})]),_:1})}var i=c("5502"),d=c("6605"),b={name:"SubBread",setup(){const e=Object(d["c"])(),t=Object(i["b"])(),c=Object(a["computed"])(()=>{const c={};return t.state.category.list.forEach(t=>{t.children&&t.children.forEach(a=>{a.id===e.params.id&&(c.sub={id:a.id,name:a.name},c.top={id:t.id,name:t.name})})}),c});return{category:c}}},u=c("6b0d"),j=c.n(u);const m=j()(b,[["render",l]]);var p=m;const O=e=>(Object(a["pushScopeId"])("data-v-2c79c850"),e=e(),Object(a["popScopeId"])(),e),h={key:0,class:"sub-filter"},g={class:"item"},v=O(()=>Object(a["createElementVNode"])("div",{class:"head"},"品牌：",-1)),f={class:"body"},k=["onClick"],C={class:"head"},N={class:"body"},V=["onClick"],B={key:1,class:"sub-filter"};function y(e,t,c,o,r,n){const s=Object(a["resolveComponent"])("XtxSkeleton");return o.filterData&&!o.filterLoading?(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",h,[Object(a["createElementVNode"])("div",g,[v,Object(a["createElementVNode"])("div",f,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(o.filterData.brands,e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("a",{onClick:t=>o.changeBrand(e.id),class:Object(a["normalizeClass"])({active:o.filterData.selectedBrand===e.id}),href:"javascript:;",key:e.id},Object(a["toDisplayString"])(e.name),11,k))),128))])]),(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(o.filterData.saleProperties,e=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",{class:"item",key:e.id},[Object(a["createElementVNode"])("div",C,Object(a["toDisplayString"])(e.name)+":",1),Object(a["createElementVNode"])("div",N,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.properties,t=>(Object(a["openBlock"])(),Object(a["createElementBlock"])("a",{onClick:c=>o.changeProp(e,t.id),class:Object(a["normalizeClass"])({active:t.id===e.selectedProp}),href:"javascript:;",key:t.id},Object(a["toDisplayString"])(t.name),11,V))),128))])]))),128))])):(Object(a["openBlock"])(),Object(a["createElementBlock"])("div",B,[Object(a["createVNode"])(s,{class:"item",width:"800px",height:"40px"}),Object(a["createVNode"])(s,{class:"item",width:"800px",height:"40px"}),Object(a["createVNode"])(s,{class:"item",width:"600px",height:"40px"}),Object(a["createVNode"])(s,{class:"item",width:"600px",height:"40px"}),Object(a["createVNode"])(s,{class:"item",width:"600px",height:"40px"})]))}c("3c65");var E=c("c405"),S={name:"SubFilter",setup(e,{emit:t}){const c=Object(d["c"])(),o=Object(a["ref"])(null),r=Object(a["ref"])(!1);Object(a["watch"])(()=>c.params.id,(e,t)=>{e&&c.path==="/category/sub/"+e&&(r.value=!0,e&&Object(E["b"])(c.params.id).then(({result:e})=>{e.selectedBrand=null,e.brands.unshift({id:null,name:"全部"}),e.saleProperties.forEach(e=>{e.selectedProp=void 0,e.properties.unshift({id:null,name:"全部"})}),o.value=e,r.value=!1}))},{immediate:!0});const n=()=>{const e={brandId:null,attrs:[]};return e.brandId=o.value.selectedBrand,o.value.saleProperties.forEach(t=>{if(t.selectedProp){const c=t.properties.find(e=>e.id===t.selectedProp);e.attrs.push({groupName:t.name,propertyName:c.name})}}),0===e.attrs.length&&(e.attrs=null),e},s=e=>{o.value.selectedBrand!==e&&(o.value.selectedBrand=e,t("filter-change",n()))},l=(e,c)=>{e.selectedProp!==c&&(e.selectedProp=c,t("filter-change",n()))};return{filterData:o,filterLoading:r,getFilterParams:n,changeBrand:s,changeProp:l}}};c("5430");const x=j()(S,[["render",y],["__scopeId","data-v-2c79c850"]]);var P=x;const w={class:"sub-sort"},D={class:"sort"},F={class:"check"};function I(e,t,c,o,r,n){const s=Object(a["resolveComponent"])("XtxCheckbox");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",w,[Object(a["createElementVNode"])("div",D,[Object(a["createElementVNode"])("a",{class:Object(a["normalizeClass"])({active:null===o.sortParams.sortField}),onClick:t[0]||(t[0]=e=>o.changeSort(null)),href:"javascript:;"},"默认排序",2),Object(a["createElementVNode"])("a",{class:Object(a["normalizeClass"])({active:"publishTime"===o.sortParams.sortField}),onClick:t[1]||(t[1]=e=>o.changeSort("publishTime")),href:"javascript:;"},"最新商品",2),Object(a["createElementVNode"])("a",{class:Object(a["normalizeClass"])({active:"orderNum"===o.sortParams.sortField}),onClick:t[2]||(t[2]=e=>o.changeSort("orderNum")),href:"javascript:;"},"最高人气",2),Object(a["createElementVNode"])("a",{class:Object(a["normalizeClass"])({active:"evaluateNum"===o.sortParams.sortField}),onClick:t[3]||(t[3]=e=>o.changeSort("evaluateNum")),href:"javascript:;"},"评论最多",2),Object(a["createElementVNode"])("a",{onClick:t[4]||(t[4]=e=>o.changeSort("price")),href:"javascript:;"},[Object(a["createTextVNode"])(" 价格排序 "),Object(a["createElementVNode"])("i",{class:Object(a["normalizeClass"])(["arrow up",{active:"price"===o.sortParams.sortField&&"asc"==o.sortParams.sortMethod}])},null,2),Object(a["createElementVNode"])("i",{class:Object(a["normalizeClass"])(["arrow down",{active:"price"===o.sortParams.sortField&&"desc"==o.sortParams.sortMethod}])},null,2)])]),Object(a["createElementVNode"])("div",F,[Object(a["createVNode"])(s,{onChange:o.changeCheck,modelValue:o.sortParams.inventory,"onUpdate:modelValue":t[5]||(t[5]=e=>o.sortParams.inventory=e)},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("仅显示有货商品")]),_:1},8,["onChange","modelValue"]),Object(a["createVNode"])(s,{onChange:o.changeCheck,modelValue:o.sortParams.onlyDiscount,"onUpdate:modelValue":t[6]||(t[6]=e=>o.sortParams.onlyDiscount=e)},{default:Object(a["withCtx"])(()=>[Object(a["createTextVNode"])("仅显示特惠商品")]),_:1},8,["onChange","modelValue"])])])}var _={name:"SubSort",setup(e,{emit:t}){const c=Object(a["reactive"])({inventory:!1,onlyDiscount:!1,sortField:null,sortMethod:null}),o=e=>{if("price"===e)c.sortField=e,null===c.sortMethod?c.sortMethod="desc":c.sortMethod="desc"===c.sortMethod?"asc":"desc";else{if(c.sortField===e)return;c.sortField=e,c.sortMethod=null}t("sort-change",c)},r=e=>{t("sort-change",c)};return{sortParams:c,changeSort:o,changeCheck:r}}};c("d384");const z=j()(_,[["render",I],["__scopeId","data-v-0284afc1"]]);var L=z,T=c("aed6"),M={name:"SubCategory",components:{SubBread:p,SubFilter:P,SubSort:L,GoodsItem:T["a"]},setup(){const e=Object(d["c"])(),t=Object(a["ref"])(!1),c=Object(a["ref"])(!1),o=Object(a["ref"])([]);let r={page:1,pageSize:20};const n=()=>{t.value=!0,r.categoryId=e.params.id,Object(E["c"])(r).then(({result:e})=>{e.items.length?(o.value.push(...e.items),r.page++):c.value=!0,t.value=!1})};Object(a["watch"])(()=>e.params.id,t=>{t&&"/category/sub/"+t===e.path&&(c.value=!1,o.value=[],r={page:1,pageSize:20})});const s=e=>{c.value=!1,r={...r,...e},r.page=1,o.value=[]},l=e=>{c.value=!1,r={...r,...e},r.page=1,o.value=[]};return{loading:t,finished:c,goodsList:o,getData:n,sortChange:s,filterChange:l}}};c("49f3");const X=j()(M,[["render",s],["__scopeId","data-v-78d69afc"]]);t["default"]=X},"0b0f":function(e,t,c){},2870:function(e,t,c){},"42d1":function(e,t,c){"use strict";c("6851")},"49f3":function(e,t,c){"use strict";c("2870")},5430:function(e,t,c){"use strict";c("0b0f")},6851:function(e,t,c){},aed6:function(e,t,c){"use strict";var a=c("7a23");const o=["src"],r={class:"name ellipsis"},n={class:"desc ellipsis"},s={class:"price"};function l(e,t,c,l,i,d){const b=Object(a["resolveComponent"])("RouterLink");return Object(a["openBlock"])(),Object(a["createBlock"])(b,{to:"/product/"+c.goods.id,class:"goods-item"},{default:Object(a["withCtx"])(()=>[Object(a["createElementVNode"])("img",{src:c.goods.picture,alt:""},null,8,o),Object(a["createElementVNode"])("p",r,Object(a["toDisplayString"])(c.goods.name),1),Object(a["createElementVNode"])("p",n,Object(a["toDisplayString"])(c.goods.desc),1),Object(a["createElementVNode"])("p",s,"¥"+Object(a["toDisplayString"])(c.goods.price),1)]),_:1},8,["to"])}var i={name:"GoodsItem",props:{goods:{type:Object,default:()=>{}}}},d=(c("42d1"),c("6b0d")),b=c.n(d);const u=b()(i,[["render",l],["__scopeId","data-v-55571ba8"]]);t["a"]=u},b0ab:function(e,t,c){},d384:function(e,t,c){"use strict";c("b0ab")}}]);
//# sourceMappingURL=chunk-2e187840.96e66230.js.map